<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">


<head>
  <title>User Profile</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
</head>

<body>
<div th:replace="~{partials/navbar :: navbar}"></div>
<h1>User Profile</h1>
<!-- display details about the current user -->
<h3 th:text="${user.username} ?: 'No username'"></h3>
<p th:text="${user.email} ?: 'No email'"></p>
<p th:text="${user.dietarypreferences} ?: 'No dietary preferences'"></p>


<!-- Link to create a new recipe -->
<a th:href="@{/recipes/new}" sec:authorize="isAuthenticated()">Create Recipe</a>

<!-- Display the saved recipe details, if available -->
<div th:if="${savedRecipe}">
  <h2>Saved Recipe Details:</h2>
  <p>Title: <span th:text="${savedRecipe.title} ?: 'No title'"></span></p>
</div>

<ul th:if="${mealPlanners}">
  <h2>Meal Planner</h2>
  <li th:each="mealPlanner : ${mealPlanners}">
    <span th:text="${mealPlanner.date} ?: 'No date'"></span>:
    <span th:text="${mealPlanner.recipe.title} ?: 'No recipe title'"></span>
  </li>
</ul>


<div th:replace="~{partials/footer :: footer}"></div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
</body>

</html>


